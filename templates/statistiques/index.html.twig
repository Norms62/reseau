{% extends 'base.html.twig' %}

{% block title %}Statistiques{% endblock %}

{% block body %}
<h1>Statistiques</h1>
{# Table sur nb et temps des tickets selon le mois #}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Mois </th>
            <th>Jan</th>
            <th>Fev</th>
            <th>Mars</th>
            <th>Avril</th>
            <th>Mai</th>
            <th>Juin</th>
            <th>Juil</th>
            <th>Aout</th>
            <th>Sept</th>
            <th>Oct</th>
            <th>Nov</th>
            <th>Dec</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th> Nombre de ticket </th>
            {% for t in tabNbTicket %}
                <td> {{t}} </td>
            {% endfor %}
        </tr>
        <tr>
            <th> Temps des tickets </th>
            {% for t in tabTempsTotal %}
                <td> {{t}} </td>
            {% endfor %}
        </tr>
    </tbody>
</table>

{# Table sur nb et temps des tickets selon le prestataire #}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th> Prestataire </th>
            {% for t in ticketParPresta %}
                <th>{{t.type}} </th>
            {% endfor %}
        <tr>
    </thead>
    <tbody>
        <tr>
            <th> Nombre de tickets </th>
            {% for t in ticketParPresta %}
                <td>{{t.nbTicket}} </td>
            {% endfor %}
        </tr>
        <tr>
            <th> Temps des tickets (h) </th>
            {% for t in ticketParPresta %}
                <td>{{t.tempsTotal}} </td>
            {% endfor %}
        </tr>
    </tbody>
</table>

{# Table sur nb ticket selon les impact , priorité et résolution #}
<table class="table table-striped table-bordered">
    <thead>
        <tr class="danger">
            <th> Résolution </th>
            {% for p in priorite %}
                <th class="danger"> {{p.priorite}} </th>
            {% endfor %}
            {% for i in impact %}
                <th> {{i.impact}}
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        <tr>
            <th> Ouvert </th>
            {% for p in priorite %}
                <td> {{ tabPrioriteResolution['ouvert'][p.priorite]}} </td>
            {% endfor %}
            {% for i in impact %}
                <td> {{ tabImpactResolution['ouvert'][i.impact]}} </td>
            {% endfor %}
        </tr>
        <tr>
            <th> Résolu </th>
            {% for p in priorite %}
                <td> {{ tabPrioriteResolution['résolu'][p.priorite]}} </td>
            {% endfor %}
            {% for i in impact %}
                <td> {{ tabImpactResolution['résolu'][i.impact]}} </td>
            {% endfor %}
        </tr>
        <tr>
            <th> Réouvert </th>
                {% for p in priorite %}
                    <td> {{ tabPrioriteResolution['réouvert'][p.priorite]}} </td>
                {% endfor %}
                {% for i in impact %}
                    <td> {{ tabImpactResolution['réouvert'][i.impact]}} </td>
                {% endfor %}
        </tr>
    </tbody>
</table>

{# Table sur nb ticket du jour #}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th> Nombre de ticket aujourd'hui </th>
            <th> Nombre de ticket hier </th>
            <th> Nombre de ticket cette semaine </th>
            <th> Nombre de ticket ce mois
        </tr>
    </thead>
    <tbody>
        <tr>
            {% for t in ticketDuJour %}
                <td> {{t.nbTicket }}</td>
            {% endfor %}
            {% for t in ticketHier %}
                <td> {{t.nbTicket }}</td>
            {% endfor %}
            {% for t in ticketSemaine %}
                <td> {{t.nbTicket}} </td>
            {% endfor %}
            {% for t in ticketMois %}
                <td> {{t.nbTicket}} </td>
            {% endfor %}
        </tr>
    </tbody>
</table>
{% endblock %}
